+++
title = "Duck Typist"

[params]
jsModules = ["/js/x-keyboard.js"]
jsScripts = ["/js/duck-typist.js"]

footer = """
  √©lev√© par [x-keyboard](https://onedeadkey.github.io/x-keyboard),
  inspir√© par [keyzen](https://github.com/wwwtyro/keyzen)
  et [keybr](https://github.com/aradzie/keybr.com),
  nourri par [MonkeyType](https://github.com/monkeytypegame/monkeytype)
"""
+++

<style>
  /* compact view: let the flex magic handle the vertical margins */
  main { display: flex; }
  h1, #banner { display: none; }
  footer { margin-top: 0; }
  .keyboard { margin-bottom: 0; }
  .keyboard p { margin: 0; }

  h2 .quacks {
    float: right;
    transition: transform 1s;
    user-select: none;
    cursor: grab;
  }

  h1.active .quacks,
  h2.active .quacks {
    transform: translateX(-1000%);
  }

  h2 {
    margin: .5em 0 0;
    font-size: 2em;
  }

  #lesson {
    text-align: left;
    font-family: monospace;
    font-size: 2em;
    line-height: 1.2em;
    margin: 0;
    padding: 8px;
    word-wrap: break-word;
    word-break: break-all;
    overflow-wrap: break-word;
    white-space: pre-wrap;
    max-width: 100%;
    max-height: 6em; /* Show about 5 lines of text */
    overflow-y: auto;
    overflow-x: hidden;
    border: 1px solid transparent;
    border-radius: 4px;
    background-color: rgba(0, 0, 0, 0.02);
    scroll-behavior: smooth;
  }

  #lesson span {
    box-sizing: border-box;
  }

  #current {
    border-bottom: 2px solid;
  }

  #lesson { color: #333; }
  .done   { color: #999; }
  .error  { color: red; }
  .fixed  { color: green; }
  .space {
    word-break: break-all;
  }

  .tab {
    color: #888;
    font-weight: bold;
  }

  .tab-spacing {
    display: inline;
    font-size: inherit;
  }

  .carriage-return {
    color: #888;
    font-weight: bold;
  }

  .custom-text-mode {
    background-color: rgba(0, 122, 204, 0.1);
    border-left: 4px solid #007acc;
    padding-left: 8px;
  }

  @media (prefers-color-scheme: dark) {
    .custom-text-mode {
      background-color: rgba(0, 122, 204, 0.2);
    }
  }

  .key_list kbd {
    font-family: monospace;
    text-transform: uppercase;
    background-color: transparent;
    display: inline-block;
    margin: 0 2px;
    padding: 0;
    border: none;
    cursor: pointer;
  }

  .key_list kbd.inactive {
    color: gray;
  }

    @media (prefers-color-scheme: dark) {
    #lesson { 
      color: white; 
      background-color: rgba(255, 255, 255, 0.05);
    }
    .error  { color: #f44; }
    .fixed  { color: #9e1; }
    .custom-text-mode {
      background-color: rgba(0, 122, 204, 0.2);
    }
    #custom-text {
      background-color: #2d2d2d;
      color: white;
      border-color: #555;
    }
    #toggle-custom-text {
      background-color: #3d3d3d !important;
      color: white !important;
      border-color: #555;
    }
  }
</style>

<div>
  <h2><span class="key_list"></span><span class="quacks">ü¶Ü</span></h2>
  <div class="status">¬∑</div>
</div>

<div style="margin: 1em 0;">
  <button id="toggle-custom-text" style="margin-bottom: 8px; padding: 6px 12px; 
                                          background: #f0f0f0; color: #333; border: 1px solid #ccc; 
                                          border-radius: 4px; cursor: pointer;">üìù Custom Text</button>
  <div id="custom-text-panel" style="display: none;">
    <textarea id="custom-text" placeholder="Paste your custom text here for typing practice..." 
              style="width: 100%; min-height: 80px; font-family: monospace; font-size: 14px; 
                     border: 1px solid #ccc; border-radius: 4px; padding: 8px; resize: vertical;"></textarea>
    <div style="margin-top: 8px;">
      <button id="use-custom-text" style="padding: 8px 16px; 
                                          background: #007acc; color: white; border: none; 
                                          border-radius: 4px; cursor: pointer;">Use Custom Text</button>
      <button id="clear-custom-text" style="margin-left: 8px; padding: 8px 16px; 
                                            background: #666; color: white; border: none; 
                                            border-radius: 4px; cursor: pointer;">Clear & Use Words</button>
      <small style="margin-left: 16px; color: #666;">Tip: Press Ctrl+Enter in textarea to use text</small>
    </div>
  </div>
</div>

<p id="lesson"></p>

<div class="keyboard">
  <input hidden spellcheck="false" />
  <x-keyboard></x-keyboard>
  <p style="text-align: right;">
    <span style="float: left;">
      {{< keymap-list >}}
      <select id="dict">
        <option value="fr,french_1k">Fran√ßais 1k</option>
        <option value="fr,french_10k" selected>Fran√ßais 10k</option>
        <option value="en,english_1k">English 1k</option>
        <option value="en,english_10k">English 10k</option>
      </select>
    </span>
    <select id="geometry">
      <option value="iso" selected>ISO</option>
      <option value="ansi">ANSI</option>
      <option value="ol60">TMx</option>
      <option value="ol50">4√ó6</option>
      <option value="ol40">3√ó6</option>
    </select>
  </p>
</div>
